<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AnimeStream Free</title>
  <style>
    body {
      background: linear-gradient(to bottom right,#060613,#000);
      color:#fff;
      font-family:'Poppins',sans-serif;
      display:flex;
      flex-direction:column;
      align-items:center;
      min-height:100vh;
      margin:0;
    }
    h1{color:#00bfff;margin:30px 0;text-shadow:0 0 10px #0077ff;}
    .search-box{display:flex;gap:10px;margin-bottom:20px;}
    input{padding:10px;border:none;border-radius:10px;width:250px;}
    button{background:#0077ff;color:#fff;border:none;padding:10px 20px;
      border-radius:10px;cursor:pointer;font-weight:bold;}
    button:hover{background:#0055cc;}
    .anime-card{background:rgba(255,255,255,0.1);border-radius:20px;
      width:90%;max-width:500px;padding:20px;text-align:center;}
    img{width:100%;border-radius:15px;}
    #video-player{margin-top:20px;width:100%;height:280px;border-radius:10px;overflow:hidden;}
    iframe{width:100%;height:100%;border:none;}
  </style>
</head>
<body>
  <h1>AnimeStream Free</h1>
  <div class="search-box">
    <input id="search" type="text" placeholder="Digite o nome do anime...">
    <button onclick="buscarAnime()">Buscar</button>
  </div>
  <div id="anime-container"></div>

  <script>
  async function buscarAnime(){
    const termo=document.getElementById('search').value.trim();
    if(!termo)return alert('Digite o nome de um anime!');
    const anime=await fetchAniList(termo);
    if(!anime)return alert('Anime não encontrado!');
    mostrarAnime(anime);
    buscarVideo(termo+" full episode anime");
  }

  async function fetchAniList(search){
    const query=`query ($s:String){
      Media(search:$s,type:ANIME){
        title{romaji,english}
        description(asHtml:false)
        coverImage{large}
        episodes
      }
    }`;
    const res=await fetch('https://graphql.anilist.co',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({query,variables:{s:search}})
    });
    const data=await res.json();
    return data.data.Media;
  }

  function mostrarAnime(anime){
    const c=document.getElementById('anime-container');
    c.innerHTML=`
      <div class="anime-card">
        <img src="${anime.coverImage.large}">
        <h2>${anime.title.romaji}</h2>
        <p>${anime.description.replace(/<[^>]+>/g,'')}</p>
        <p><b>Episódios:</b> ${anime.episodes || 'Desconhecido'}</p>
        <div id="video-player"><p>Carregando vídeo...</p></div>
      </div>`;
  }

  // Busca pública no YouTube (sem key) usando embed
  function buscarVideo(nome){
    const pesquisa=encodeURIComponent(nome);
    const iframe=`<iframe src="https://www.youtube.com/embed?listType=search&list=${pesquisa}" allowfullscreen></iframe>`;
    document.getElementById('video-player').innerHTML=iframe;
  }
  </script>
</body>
</html>